# 李特尔定律 （Little's Law）

李特尔定律（Little's Law）确定了为了通过吞吐量（throughput）完全隐藏延迟（latency）所需的并发量。

concurrency (ops) = latency (s) × throughput (ops/s)

并发 = 延迟 * 吞吐

它用于确定 GPU 中为了通过 warp 切换（warp scheduling） 隐藏延迟，需要有多少条指令“在飞行中”（in flight）

（也就是类似 CPU 的细粒度线程级并行，如同时多线程）。

## 举例说明

- 如果某 GPU 峰值吞吐量为每周期 1 条指令，内存访问延迟为 400 周期。
    - 那么程序中所有活跃 warp 需要 400 个并发内存操作 才能完全利用吞吐能力隐藏延迟。

- 如果吞吐量提高到每周期 10 条指令，内存访问延迟为 400 周期。
    - 那么程序中所有活跃 warp 需要 4000 个并发内存操作 来充分利用增加的吞吐量。

直观上，内存访问的延迟更长，似乎应该需要更多并发，但实际所需并发量不仅取决于延迟，还取决于吞吐量。由于内存带宽远低于算术带宽，因此所需并发量差别不大，这对于混合算术与内存操作、以延迟隐藏为导向的系统是一种有用的平衡。

- 吞吐量为 每周期 1 条指令，表示 GPU 理论上每个时钟周期可以完成 1 条指令
- 内存访问延迟为 400 周期，表示从 GPU 发出一个内存请求（比如读取一个字）开始，到数据真正返回并可被使用。

