# 管线利用率 （Pipe Utilization）

管线利用率（Pipe Utilization） 衡量一个 kernel 在每个 流式多处理器（Streaming Multiprocessor，SM） 内部执行资源的使用效率。

每个 SM 包含多个独立的执行管线（execution pipes），针对不同类型的指令进行了优化：
1. CUDA Cores → 用于通用浮点运算（floating-point arithmetic）
2. Tensor Cores → 用于张量运算（tensor contractions）
3. Load/Store Units → 用于内存访问
4. Control Flow Units → 用于分支控制

管线利用率显示的是：
- 当某条管线至少在执行一个活跃 warp 时，其实际达成的性能占该管线峰值速率的百分比，并对所有活跃 SM 取平均值。

在调试应用性能到管线利用率级别之前，GPU 程序员通常应先考虑 **GPU kernel 利用率** 和 **SM 利用率**。

在 Nsight Compute（ncu） 中，管线利用率可以通过如下指标获取：
```
sm__inst_executed_pipe_*.avg.pct_of_peak_sustained_active
```
- $*$ 表示具体管线类型
- fma → 浮点运算管线
- tensor → 张量管线
- lsu → load/store 单元
- adu → address 单元