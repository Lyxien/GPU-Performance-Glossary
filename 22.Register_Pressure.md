# 寄存器压力 （Register Pressure）

寄存器压力（Register pressure） 是一个形象的说法，用来描述当 寄存器文件（register file）成为瓶颈 时的情况。

在 Parallel Thread eXecution (PTX) 语言中，寄存器是虚拟的、理论上无限的，但 Streaming Multiprocessor (SM) 的寄存器文件是物理的，因此数量有限。

一个线程所占用的寄存器空间由该 kernel 的 Streaming ASSembler (SASS) 代码决定。由于同一个线程块（thread block）中的所有线程会被调度到同一个 SM 上，因此线程块总共需要的寄存器空间也取决于 kernel 的启动配置（launch configuration）。当每个线程块分配的寄存器空间增加时，可同时调度到同一个 SM 的线程块数量就会减少，从而降低 占用率（occupancy），也更难隐藏延迟（latency）。

关于寄存器压力与近年来 Streaming Multiprocessor 架构中关键特性的关系，可参考 SemiAnalysis 的这篇优秀文章，例如异步拷贝（Ampere 架构引入）、Tensor Memory Accelerator（TMA，Hopper 架构引入）、以及 tensor memory（Blackwell 架构引入）。

寄存器压力同样存在于 CPU 上，在那里类似的寄存器瓶颈会限制循环在自动向量化（auto-vectorization）过程中进行 strip-mining 的程度。